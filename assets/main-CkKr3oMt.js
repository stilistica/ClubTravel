import{a as c}from"./vendor-BWC8OeqA.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function o(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(t){if(t.ep)return;t.ep=!0;const n=o(t);fetch(t.href,n)}})();document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".open-menu"),r=document.querySelector(".mob-menu");!e||!r||(e.addEventListener("click",()=>{r.classList.toggle("is-open")}),r.addEventListener("click",o=>{o.target===r&&r.classList.remove("is-open")}))});const i=c.create({baseURL:"https://thankful-garden-94c969a4ca.strapiapp.com/api",headers:{"Content-Type":"application/json"}});async function l(e,r){return(await i.post("/auth/local",{identifier:e,password:r})).data}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("loginForm");e&&e.addEventListener("submit",async r=>{r.preventDefault();const o=e.email.value.trim(),s=e.password.value;if(!o||!s){alert("Введите email и пароль");return}try{const t=await l(o,s);localStorage.setItem("jwt",t.jwt),window.location.replace("/ClubTravel/html/pages/accountPage.html")}catch(t){const n=t.response?.data?.error?.message||"Неверный email или пароль";alert(n)}})});async function u(e,r){return(await i.post("/auth/local/register",{username:e,email:e,password:r})).data}function d(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function m(e){return e.length>=8&&/[A-Za-z]/.test(e)&&/\d/.test(e)}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("registerForm");e&&e.addEventListener("submit",async r=>{r.preventDefault();const o=e.email.value.trim(),s=e.password.value,t=e.passwordConfirm.value;if(!o){alert("Введите email");return}if(!d(o)){alert("Некорректный email");return}if(!s){alert("Введите пароль");return}if(!m(s)){alert("Пароль должен быть минимум 8 символов и содержать букву и цифру");return}if(s!==t){alert("Пароли не совпадают");return}try{const n=await u(o,s);localStorage.setItem("jwt",n.jwt),window.location.replace("/ClubTravel/html/pages/loginPage.html")}catch(n){const a=n.response?.data?.error?.message||"Ошибка регистрации";alert(a)}})});
