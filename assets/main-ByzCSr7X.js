import{S as l,N as u,a as d}from"./vendor-BDUuzTT3.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}})();document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".open-menu"),t=document.querySelector(".mob-menu");!e||!t||(e.addEventListener("click",()=>{t.classList.toggle("is-open")}),t.addEventListener("click",s=>{s.target===t&&t.classList.remove("is-open")}))});l.use([u]);document.querySelectorAll("[data-swiper]").forEach(e=>{const t=e.closest(".news-home__slider-wrapper");if(!t)return;const s=t.querySelector(".news-home__button-prev"),o=t.querySelector(".news-home__button-next");new l(e,{slidesPerView:1,spaceBetween:16,speed:600,navigation:{prevEl:s,nextEl:o},breakpoints:{768:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:3,spaceBetween:27}}})});const c=d.create({baseURL:"https://thankful-garden-94c969a4ca.strapiapp.com/api",headers:{"Content-Type":"application/json"}});async function m(e,t){return(await c.post("/auth/local",{identifier:e,password:t})).data}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("loginForm");e&&e.addEventListener("submit",async t=>{t.preventDefault();const s=e.email.value.trim(),o=e.password.value;if(!s||!o){alert("Введите email и пароль");return}try{const r=await m(s,o);localStorage.setItem("jwt",r.jwt),window.location.replace("/ClubTravel/html/pages/accountPage.html")}catch(r){const n=r.response?.data?.error?.message||"Неверный email или пароль";alert(n)}})});async function p(e,t){return(await c.post("/auth/local/register",{username:e,email:e,password:t})).data}function f(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function g(e){return e.length>=8&&/[A-Za-z]/.test(e)&&/\d/.test(e)}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("registerForm");e&&e.addEventListener("submit",async t=>{t.preventDefault();const s=e.email.value.trim(),o=e.password.value,r=e.passwordConfirm.value;if(!s){alert("Введите email");return}if(!f(s)){alert("Некорректный email");return}if(!o){alert("Введите пароль");return}if(!g(o)){alert("Пароль должен быть минимум 8 символов и содержать букву и цифру");return}if(o!==r){alert("Пароли не совпадают");return}try{const n=await p(s,o);localStorage.setItem("jwt",n.jwt),window.location.replace("/ClubTravel/html/pages/loginPage.html")}catch(n){const a=n.response?.data?.error?.message||"Ошибка регистрации";alert(a)}})});async function w(e){return(await c.post("/auth/forgot-password",{email:e})).data}const i=document.getElementById("forgotForm");i&&i.addEventListener("submit",async e=>{e.preventDefault();try{await w(i.email.value),i.reset(),alert("Письмо отправлено")}catch{alert("Ошибка")}});
